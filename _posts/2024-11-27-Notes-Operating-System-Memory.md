---
title: 操作系统导论读书笔记：内存
description: notes on operating system
author: sky2shaw
date: 2024-11-27 22:27:00 +0800
categories: [Blogging, Demo]
tags: [os]
pin: true
math: true
mermaid: true
---

## 前言
我最近在学习操作系统，准备完成xv6的Lab，顺便读一读操作系统导论（Operating System: Three Easy Pieces）。这本书确实是本好书，值得一读。为了避免读了就忘，写篇博客记录自己的理解。

## 什么是内存的虚拟化？
首先一个问题，什么是内存的虚拟化？内存的虚拟化，是指操作系统给进程提供了一个“假象”，让进程看起来拥有一块很大的独占的连续物理内存。以64位系统为例，进程可以拥有2^64个字节大小的虚拟内存，也就有2^64个虚拟地址。为什么说说这些地址是虚拟的呢？因为进程看到的这些地址并不是真实物理内存的地址，需要操作系统进行转换才能得到真实的物理内存地址。

## 为什么要虚拟化内存？
第二个问题，为什么要虚拟化内存？或者说，为什么操作系统要为每个进程制造一个它们都拥有巨大独占内存的假象呢？主要是为了让生活变得更加轻松。有了这样的一个假象之后，程序员在编写程序的时候就不用管数据或代码到底存放在物理内存中的哪个地方了，也不用管内存是否足够大。想象一下，必须将代码和数据放到一个拥挤的小而拥挤的内存，这将是多么痛苦的事情啊。
还有一点是为了不同进程之间内存的隔离。不同进程的虚拟内存被操作系统映射到了不同的物理内存，这样就从根本上避免了不同进程之间错误修改对方内存数据的风险。

## 操作系统是如何实现内存的虚拟化的？